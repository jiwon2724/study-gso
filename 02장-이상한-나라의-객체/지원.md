# 객체, 그리고 이상한 나라

- 상태를 결정하는 것은 행동이지만, 행동의 결과를 결정하는 것은 상태다.
    - 상태에 띠라서 행동을 결정함. 즉, 행동은 상태에 의존적임.
- 객체의 상태는 변경이 가능하며, 행동의 순서는 결과에 영향을 미침.
- 객체는 어떤 상태에 있더라도 식별이 가능함.

# 객체, 그리고 소프트웨어 나라

- 객체는 식별 가능한 개체 또는 사물이며, 구체적 혹은 추상적인 개념일 수도 있음.
    - ex) 구체적 : 만질 수 있는 사물 (자동차, 핸드폰  등)
    - ex) 추상적 : 시간
- 객체는 상태(state), 행동(behavior), 식별자(identity)를 지닌 실체로 보는 것이 가장 효과적임.

## 상태

- 모든 일들의 어떤 행동에대한 결과는 과거에 어떤 행동들이 일어났었느냐에 의존함.
- 과거에 발생한 행동의 이력을 추적하는게 어려우므로, 행동의 과정과 결과를 단순하게 기술하기 위해 상태라는 개념을 고안함.
- 상태를 이용하면 과거에 얽매이지 않고 현재를 기반으로 객체의 행동 방식을 이해할 수 있음.

### 상태와 프로퍼티

- 모든 객체의 상태는 단순한 값과 객체의 조합으로 표현할 수 있다.
- 객체의 상태를 구성하는 모든 특징을 통틀어 객체의 <b>프로퍼티(property)</b>라고 한다.
    - 값이 변하지 않는 것은 **정적 프로퍼티**이며 값이 변하는 것은 **동적 프로퍼티 값** 이라고 부름.
- 객체와 객체 사이의 의미 있는 연결을 <b>링크(link)</b>라고 한다.
    - 링크는 객체가 다른 객체를 참조할 수 있다는 것을 의미한다.
        - 한 객체가 다른 객체의 식별자를 알고있는 것.
    - 링크를 통해서만 메시지를 주고받을 수 있다.
- 객체를 구성하는 단순한 값은 <b>속성(attribute)</b>이라고 불리며, 이는 프로퍼티의 일부분이다.
    - 링크로 연결된 프로퍼티와 객체를 구성하는 단순한 값

```kotlin
객체지향의 세계에선 객체는 다른 객체의 상태에 직접적으로 접근 및 상태를 변경하는 것은 불가능함.
자율적인 객체는 자신 스스로 상태를 책임져야함.
```
## 행동

- 객체의 상태를 변경하는 것은 객체의 자발적인 행동 뿐임. → 객체의 행동은 상태를 변경시킴.
    - 행동에 의해 상태가 변경되는 것은 side effect를 초래하는 의미임.
        - ex) 엘리스가 케이크를 먹는 행동은 키를 작게 변화시키고 케이크의 양을 줄임
- 객체의 행동은 상태에 영향을 받음. → 행동의 결과는 객체의 상태에 의존적임
    - 문을 통과하려면 엘리스의 키는 150cm 이상이어야함.

### 협력과 행동

- 객체가 다른 객체와 협력하는 유일한 방법은 다른 객체에게 요청(메시지)을 보내는 것.
- 객체가 어떤 행동을 하도록 만드는 것은 객체가 외부로부터 수신한 메시지임.
    - 수신된 메시지에 따라서 적절히 행동하며 협력에 참여하여 그 결과로 자신의 상태를 변경함.
- 객체는 행동을 통해 다른 객체와 협력에 참여하므로 행동은 외부에 가시적이어야함.

### 상태 캡슐화

- 메시지 송신자는 메시지 수신자의 상태 변경에 대해서는 전혀 알지 못함.
- 객체는 상태를 캡슐 안에 감춰둔 채 외부로 노출하지 않음.
    - 객체가 외부로 노출하는 것은 행동 뿐임.
- 상태를 캡슐화하게 되면 객체의 자율성을 높이고, 협력을 단순하고 유연하게 만듦.

## 식별자

- 객체를 서로 구별할 수 있는 툭정한 프로퍼티
    - ex) id, userId 등
- 객체는 어떤 상태에 있더라도 유일하게 식별이 가능함.
- 객체는 상태가 변경될 수 있기 때문에 식별자를 이용한 동일성 검사를 통해 두 인스턴스를 비교함.
    - 값(value)는 식별자를 가지지 않기 때문에 상태를 이용한 동등성 검사를 통해 두 인스턴스를 비교함.

# 행동이 상태를 결정한다

- 상태 중심이 아닌 행동 중심으로 설계를 해야함.
    1. 상태를 먼저 결정할 경우 캡슐화가 저해됨. 상태가 객체 내부로 깔끔하게 캡슐화되지 못함.
    2. 객체를 협력자가 아닌 골립된 섬으로 만듦.
        1. 다른 객체와 협력하기 어려워짐
    3. 객체의 재사용성이 저하됨.
        1. 상태에 초점을 맞춘 객체는 다양한 협력에 참여하기 어려움.
- 객체의 행동을 결정하고 그 후 행동에 적절한 상태를 선택할 것.
- **행동이 상태를 결정한다.**
- 행동을 설계하면서 어떤 객체와 협력할 것인지.

# 은유와 객체

- 객체지향 세계는 현실 세계의 단순한 모방이 아님. → 현실의 모습을 조금 참조할 뿐
    - 현실 속에서는 수동적인 존재가 소프트웨어 객체로 구현될 땐 능동적으로 변함.
- 소프트웨어 안에 창조하는 객체에게 현실 세계의 객체와는 다른 특징을 부여하는 것이 일반적임.
    - ex) 현실 속 트럼프 카드는 스스로 뒤집거나 말을 할 수도 걸을 수도 없음.
- 현실의 객체보다 더 많은 일을 할 수 있는 소프트웨어 객체의 특징을 **의인화**라고 부름
